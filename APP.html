<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>é±¼å–µ</title>
  <link rel="icon" type="image/png" href="important-img/icon.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- é½¿è½®ç‰¹æ•ˆå®¹å™¨ -->
  <div class="gear-effect-container" id="gearContainer"></div>

  <!-- è®¾ç½®æŒ‰é’® -->
  <div class="settings-toggle" id="settingsToggle">â‡”</div>

  <!-- èœå•é®ç½© -->
  <div class="overlay" id="menuOverlay"></div>

  <!-- è®¾ç½®èœå• -->
  <div class="settings-menu" id="settingsMenu">
    <h3>âš™ï¸ è®¾ç½®</h3>

    <div class="setting-section">
      <h4>ğŸ¨ çº¯è‰²èƒŒæ™¯</h4>
      <div class="setting-option" data-bg="default">é»˜è®¤æ·¡è“</div>
      <div class="setting-option" data-bg="lightblue">æµ…è“è‰²</div>
      <div class="setting-option" data-bg="white">çº¯ç™½</div>
      <div class="setting-option" data-bg="dark">æ·±ç°</div>
    </div>

    <div class="setting-section">
      <h4>ğŸ–¼ï¸ å›¾ç‰‡èƒŒæ™¯</h4>
      <div id="imageBgOptions"></div>
    </div>
  </div>

  <!-- ä¸»å†…å®¹ -->
  <div class="layout">
    <div class="left-panel panel">
      <div class="avatar">
        <a href="important-img/avatar.png"><img src="important-img/avatar.png" target="_blank"></a>
      </div>
     <h1>Hello!</h1>
      <p>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™ï½è¿™é‡Œè®°å½•ä¸€äº›æƒ³æ³•ã€é¡¹ç›®å’Œæ—¥å¸¸ã€‚</p>
      <div class="tags">
        <span class="tag">å‰ç«¯</span>
        <span class="tag">å¼‚æ˜Ÿæ¥å®¢</span>
        <span class="tag">å­¦ç”Ÿ</span>
        <span class="tag">çŒ«å¨˜</span>
      </div>
      <div class="btn-placeholder"><a href="https://github.com/yumiao-awa" target="_blank">æˆ‘çš„githubè´¦å·</a></div>
      <div class="btn-placeholder"><a href="https://github.com/yumiao-awa/myself" target="_blank">ç½‘é¡µæºä»£ç </a></div>
    </div>

    <div class="right-panel panel">
      <h2 class="section-title">idea & link</h2>
      <div id="articlesContainer"></div>
    </div>
  </div>

  <script>
    // ===== æ–‡ç« æ•°æ®ï¼ˆJavaScript åˆ—è¡¨ï¼‰=====
    const articles = [
      {
        title: "äºŒç»´ç ç”Ÿæˆå™¨",
        summary: "è…¾è®¯ç½‘ç›˜ä¸‹è½½",
        url: "https://share.weiyun.com/k2V12Qzp"
      }
    ];

    // ===== æ¸²æŸ“æ–‡ç« åˆ—è¡¨ =====
    function renderArticles() {
      const container = document.getElementById('articlesContainer');
      container.innerHTML = articles.map(article => `
        <div class="card">
          <a href="${article.url}" target="_blank">
            <h3>${article.title}</h3>
            <p>${article.summary}</p>
          </a>
          <!-- æ›¿æ¢ .btn-placeholder å†…å®¹ä¸ºé“¾æ¥ -->
          <div class="btn-placeholder link-in-box">${article.url}</div>
        </div>
      `).join('');
    }

    // ===== åˆ¤æ–­èƒŒæ™¯æ˜æš—ï¼Œè¿”å›é½¿è½®é¢œè‰² =====
    function getGearColor() {
      const bg = window.getComputedStyle(document.body).backgroundColor;
      const match = bg.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);
      if (!match) return '#2c3e50';
      const r = parseInt(match[1]), g = parseInt(match[2]), b = parseInt(match[3]);
      const brightness = (r * 299 + g * 587 + b * 114) / 1000;
      return brightness > 160 ? '#2c3e50' : '#ffffff';
    }

    // ===== ç‚¹å‡»ç”Ÿæˆ âš™ ç‰¹æ•ˆ =====
    document.addEventListener('click', function(e) {
      const gear = document.createElement('div');
      gear.className = 'gear-effect';
      gear.textContent = 'âš™';
      gear.style.color = getGearColor();
      gear.style.left = (e.clientX - 12) + 'px';
      gear.style.top = (e.clientY - 12) + 'px';
      document.getElementById('gearContainer').appendChild(gear);
      setTimeout(() => gear.remove(), 1000);
    });

    // ===== èœå•æ§åˆ¶ =====
    const toggleBtn = document.getElementById('settingsToggle');
    const menu = document.getElementById('settingsMenu');
    const overlay = document.getElementById('menuOverlay');

    toggleBtn.addEventListener('click', () => {
      menu.classList.add('open');
      overlay.classList.add('show');
    });

    overlay.addEventListener('click', () => {
      menu.classList.remove('open');
      overlay.classList.remove('show');
    });

    // ===== å›¾ç‰‡èƒŒæ™¯åˆ—è¡¨ï¼ˆJavaScript ç®¡ç†ï¼‰=====
    const imageBackgrounds = [
      { name: 'æ˜Ÿç©º', path: 'https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80' },
      { name: 'æ£®æ—', path: 'https://images.unsplash.com/photo-1543512214-3070928057d1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80' },
      { name: 'ç”˜åŸ', path: 'img/neko.png' },
      { name: 'æµ·æ´‹', path: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80' },
    ];

    // ===== åº”ç”¨èƒŒæ™¯å¹¶ä¿å­˜åˆ° localStorage =====
    function applyBackground(bgType, value) {
      if (bgType === 'color') {
        document.body.style.background = value;
        document.body.style.backgroundSize = '';
      } else if (bgType === 'image') {
        document.body.style.background = `url(${value}) no-repeat center center fixed`;
        document.body.style.backgroundSize = 'cover';
      }
      localStorage.setItem('bgType', bgType);
      localStorage.setItem('bgValue', value);
    }

    // ===== åˆå§‹åŒ–èƒŒæ™¯ï¼ˆé¡µé¢åŠ è½½æ—¶æ¢å¤ï¼‰=====
    function initBackground() {
      const savedType = localStorage.getItem('bgType');
      const savedValue = localStorage.getItem('bgValue');
      if (savedType && savedValue) {
        applyBackground(savedType, savedValue);
      }
    }

    // ===== ç»‘å®šèœå•äº‹ä»¶ =====
    function bindMenuEvents() {
      const bgMap = {
        default: '#f0f8ff',
        lightblue: '#e6f2ff',
        white: '#ffffff',
        dark: '#2c3e50'
      };

      document.querySelectorAll('.setting-option[data-bg]').forEach(opt => {
        opt.addEventListener('click', () => {
          const key = opt.getAttribute('data-bg');
          applyBackground('color', bgMap[key] || '#f0f8ff');
          menu.classList.remove('open');
          overlay.classList.remove('show');
        });
      });

      const imageBgOptions = document.getElementById('imageBgOptions');
      imageBgOptions.innerHTML = '';
      imageBackgrounds.forEach(img => {
        const option = document.createElement('div');
        option.className = 'setting-option';
        option.innerHTML = `<span class="bg-preview" style="background-image: url(${img.path});"></span>${img.name}`;
        option.addEventListener('click', () => {
          applyBackground('image', img.path);
          menu.classList.remove('open');
          overlay.classList.remove('show');
        });
        imageBgOptions.appendChild(option);
      });
    }

    // ===== é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ– =====
    document.addEventListener('DOMContentLoaded', () => {
      renderArticles();
      bindMenuEvents();
      initBackground();
    });
  </script>
</body>
</html>
